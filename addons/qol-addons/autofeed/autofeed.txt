// Autofeed System
// Author: RO-Journey Team
// Version: 1.0
// Enables automatic feeding using @autofeed command

// Command handler for @autofeed
-	script	AutofeedCommand	-1,{
OnInit:
    bindatcmd("autofeed", strnpcinfo(3) + "::OnCommand", 0, 99);
    end;
    
OnCommand:
    if (!getd("autofeed_enabled")) {
        setd "autofeed_enabled", 1;
        message strcharinfo(0), "Autofeed enabled. Your pets and homunculus will be fed automatically when hungry.";
    } else {
        setd "autofeed_enabled", 0;
        message strcharinfo(0), "Autofeed disabled.";
    }
    end;
}

// Pet Autofeed Timer
-	script	PetAutofeed	-1,{
OnInit:
    initnpctimer;
    end;
    
OnTimer30000: // Check every 30 seconds
    if (!getd("autofeed_enabled")) {
        end;
    }
    
    // Check pets
    for (.@i = 0; .@i < getarraysize($@pet_list); .@i++) {
        if (pet_status(.@i) == 1) { // Pet is active
            if (pet_hungry(.@i) > 80) { // Pet is hungry
                // Use the game's built-in feeding function
                // This will automatically use the correct food type
                pet_feed(.@i);
            }
        }
    }
    
    // Check homunculus
    if (homunculus_status() == 1) { // Homunculus is active
        if (homunculus_hungry() > 80) { // Homunculus is hungry
            // Use the game's built-in feeding function
            // This will automatically use the correct food type
            homunculus_feed();
        }
    }
    
    end;
} 